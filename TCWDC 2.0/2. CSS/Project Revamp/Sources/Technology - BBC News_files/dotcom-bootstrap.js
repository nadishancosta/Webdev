/*! "1.147.0-20220711-083435-f6c8b9d" */!function(){"use strict";const e=e=>{if("undefined"==typeof document||!e)return"";const o=`; ${document.cookie}`.split(`; ${encodeURIComponent(e)}=`);let t="";return 2===o.length&&(t=decodeURIComponent(o.pop().split(";").shift())),t},o=(e,o,t)=>{if("undefined"==typeof document||!e)return;const n=new Date(Date.now()+864e5*t);document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(o)}; expires=${n.toGMTString()}; domain=.bbc.com; path=/`},t=e=>{window.dotcom.consent=e},n=()=>window.dotcom.consent,i=(e,o)=>{"object"==typeof window.dotcom.vendorConsent&&null!==window.dotcom.vendorConsent&&void 0!==e&&(window.dotcom.vendorConsent[e]=o)},s=new RegExp("^(/)?(afaanoromoo|afrique|amharic|arabic|azeri|bengali|burmese|gahuza|gujarati|hausa|hindi|igbo|indonesia|korean|kyrgyz|japanese|marathi|mundo|naidheachdan|nepali|pashto|persian|pidgin|portuguese|punjabi|russian|serbian|sinhala|somali|swahili|tajik|tamil|telugu|thai|tigrinya|turkce|ukchina|ukrainian|urdu|uzbek|vietnamese|yoruba|zhongwen)"),d=new RegExp("^/ws/av-embeds/"),a=["AT","AX","BE","BG","BL","CY","CZ","DE","DK","EE","ES","EU","FI","FR","GB","GF","GG","GI","GP","GR","HR","HU","IE","IM","IS","IT","JE","LI","LT","LU","LV","MF","MT","MQ","NL","NO","PL","PM","PT","RE","RO","SE","SI","SK","YT"],r={state:0,eea:!0,country:"gb",ads:!1,notUkIp:!1},c={state:0,adverts:!1,idcta:!1},w=()=>"undefined"!=typeof window&&/[?|&]ads-debug/.test(window.location.href)||"undefined"!=typeof document&&-1!==document.cookie.indexOf("ads-debug=")||void 0!==window.dotcom.config&&!0===window.dotcom.config.adsDebug,l=(e=window.location.href)=>!(void 0===window.dotcom.config||!window.dotcom.config.mode||"test"!==window.dotcom.config.mode)||("undefined"!=typeof live&&"test"===live||(-1!==e.indexOf("test.api.bbc.co.uk")||/(localhost|sandbox|int|test|stage)(.dev)*.bbc.co*/.test(e))),p=()=>!0===window.dotcom.userinfo.notUkIp&&!0===window.dotcom.userinfo.ads,m=()=>!!(w()||p()&&window.dotcom.flags.state>0&&window.dotcom.flags.adverts),u=e=>{var o;window.dotcom.userinfo.country=e["X-Country"],window.dotcom.userinfo.notUkIp="no"===e["X-Ip_is_uk_combined"],window.dotcom.userinfo.ads="yes"===e["X-Ip_is_advertise_combined"],!0===window.dotcom.userinfo.notUkIp&&(window.dotcom.userinfo.eea=!!(o=window.dotcom.userinfo.country)&&-1!==a.indexOf(o.toUpperCase()))},g=(e,o)=>{o||(delete e.adverts,delete e.analytics),Object.keys(e).forEach((o=>{let t=e[o];t="true"===t||t,t="false"!==t&&t,window.dotcom.flags[o]=t}))},h=()=>fetch(l()?"https://gn-flagpoles.test.api.bbci.co.uk/ngas":"https://gn-flagpoles.api.bbci.co.uk/ngas").then((e=>{if(e.ok)return e.json();throw new Error("Error fetching flags")})).then((e=>{g(e,!1),window.dotcom.flags.state=2,w()&&(window.dotcom.flags.adverts=!0,window.dotcom.flags.analytics=!0)})).catch((e=>(window.dotcom.flags.state=-2,Promise.reject(e))));let f,b=[];const v={isAdsDebug:w,isTestEnv:l,isDotcomAllowed:p,isAdsEnabled:()=>new Promise((e=>{window.dotcom.userinfo.state<0||window.dotcom.flags.state<0?e(m()):0===window.dotcom.userinfo.state||0===window.dotcom.flags.state?b.push(e):e(m())})),isAnalyticsEnabled:()=>!0===window.dotcom.flags.analytics,isSigninEnabled:()=>!0===window.dotcom.flags.signin,isInEEA:()=>window.dotcom.userinfo.eea,isWorldService(e){const o=e||window.location.pathname;return s.test(o)||d.test(o)},isNewsStory:()=>"news"===window.dotcom.page.channel&&"story"===window.dotcom.page.asset_type&&!window.dotcomConfig.bbcdotcom,isLive:()=>"live"===window.dotcom.page.section,isSportsStory:()=>"sport"===window.dotcom.page.channel&&"story"===window.dotcom.page.asset_type,isSportsIndexOrHomePage:()=>"index"===window.dotcom.page.asset_type&&("sport"===window.dotcom.page.channel||"sporttipo"===window.dotcom.page.channel),isFeaturesSite(){const e=window.dotcom.page.channel;return"future"===e||"worklife"===e||"travel"===e||"culture"===e},isStoryworksSite:()=>"storyworks"===window.dotcom.page.channel,isFeaturesArticle(){return this.isFeaturesSite()&&"ARTICLE"===window.dotcom.page.pageType},isTwoColumnLayout(e=!1){if("story"===window.dotcom.page.asset_type){if((void 0===f||!0===e)&&(f=!1,window.innerWidth>900)){const e=document.getElementsByTagName("aside");if(e.length){e[0].getBoundingClientRect().top+window.scrollY<window.innerWidth&&(f=!0)}}}else f=!1;return f},isWWHP(){const e=window.location.pathname;return"/"===e||"/wwhp"===e},checkCookies(){t(1);const n=e("ckns_policy");(w()||n&&"1"===n.charAt(2))&&t(2),n||window.dotcom.userinfo.eea||(t(2),o("ckns_policy","111",365),o("ckns_explicit","0",365))},init(){const e=({resolve:e,reject:o,err:t})=>{e&&e(!0),o&&o(t),b&&b.length>0&&(b.forEach((e=>e(m()))),b=[])};return new Promise(((o,t)=>{w()?(window.dotcom.userinfo.state=1,window.dotcom.userinfo.country="au",window.dotcom.userinfo.notUkIp=!0,window.dotcom.userinfo.ads=!0,window.dotcom.userinfo.eea=!1,h().then((()=>{e({resolve:o})})).catch((o=>{e({reject:t,err:o})}))):fetch("https://www.bbc.com/userinfo").then((e=>{if(e.ok)return e.json();throw new Error("Error fetching userinfo")})).then((e=>{u(e),window.dotcom.userinfo.state=1})).catch((e=>(window.dotcom.userinfo.state=-1,Promise.reject(e)))).then((()=>{p()?fetch(l()?"https://gn-flagpoles.test.api.bbci.co.uk/gnlops":"https://gn-flagpoles.api.bbci.co.uk/gnlops").then((e=>{if(e.ok)return e.json();throw new Error("Error fetching gnlops flags")})).then((e=>{g(e,!0),window.dotcom.flags.state=1})).catch((e=>(window.dotcom.flags.state=-1,Promise.reject(e)))).then((()=>{!0!==window.dotcom.flags.adverts&&!0!==window.dotcom.flags.analytics||h().then((()=>{e({resolve:o})}))})).catch((o=>{e({reject:t,err:o})})):(window.dotcom.flags.state=1,e({resolve:o}))})).catch((o=>{e({reject:t,err:o})}))}))},reset(){b=[],window.dotcom=window.dotcom||{},window.dotcom.userinfo={...r},window.dotcom.flags={...c},window.dotcom.vendorConsent=[]}},y={name:"grapeshot",urlParams:()=>({pageUrl:window.location.href.split("?")[0]}),url:e=>{let o=e.pageUrl;return o.indexOf("/ws/av-embeds/cps/")>0&&(o=`${o.split("ws/av-embeds/cps/")[0]}${o.split("/ws/av-embeds/cps/")[1].split("/").splice(0,2).join("/")}`),o=encodeURIComponent(o),`https://bbc.gscontxt.net/?url=${o}`},meetsRequirements:e=>void 0!==e.grapeshot&&e.grapeshot},E={name:"gpt",url:()=>"https://securepubads.g.doubleclick.net/tag/js/gpt.js",meetsRequirements:e=>void 0!==e.adverts&&e.adverts&&window.dotcom.config.pageAds},k=(e,o,t,n,i)=>{if(!o){o=o||{},window.permutive=o,o.q=[],o.config=i||{},o.config.projectId=t,o.config.apiKey=n,o.config.environment=o.config.environment||"production";for(var s=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"],d=0;d<s.length;d++){var a=s[d];o[a]=function(e){return function(){var t=Array.prototype.slice.call(arguments,0);o.q.push({functionName:e,arguments:t})}}(a)}}},x=e=>{const o=e?e.replace(/(_|-|\/)[0-9]{7,8}$/,"").replace(/\/articles\/c[0-9a-hj-np-z]{10,}o$/,"/articles"):"";return o.indexOf("/")>-1?o.split("/"):[o]},_=(e,o)=>{const t=o.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp(`[\\?&]${t}=([^&#]*)`).exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},I=["/4817","/bbccom.ENV.site.SITE","/SECTION_SUBSECTION"];let P="";const S=(e,o)=>{if(P)return P;const t=[...I],n=e.indexOf("?")>-1?`?${e.split("?")[1]}`:"",i=e.split("?")[0],s=_(n,"site"),d=_(n,"adUnit");let a=i.match(/http(|s):\/\/[a-z0-9\-.]+(.com|.co.uk)(:\d+)?(\/)?(.*)?/);a=a?a.pop():"",a=a&&""!==a?(e=>e.replace(/^(news\/av\/)(.*)\/[^/]+$/,"$1$2").replace(/^news\/av\//,"news/").replace(/_and_/,"-").replace(/^news\/uk-(england|northern-ireland|scotland|wales)($|-|\/)/,"news/uk/$2").replace(/^news\/uk-([a-z]+)(-([a-z]+))?/,"news/$1/$3").replace(/^news\/(world)-([a-z-]+)/,"news/$2/").replace(/^sport\/av\//,"sport/").replace(/^sport\/(world|uk)/,"sport").replace(/^sport\/(.*)\/sports($|\/)/,"sport/$1$2").replace(/market-data\/overview/,"market-data").replace(/^(programmes)/,"news/$1"))(a):a;const r=x(a)||[],c=v.isWorldService(a),w=v.isTestEnv(i);let l=""===r[0]||"wwhp"===r[0]?"www":r[0];return d||(void 0===r[0]&&(r[0]="homepage"),"sport"===r[0]&&(l="news",r[1]&&(r[1]=r[1].replace("-",""))),"in-pictures"===r[1]&&(r[1]="inpictures"),"news"===r[0]&&r[1]&&r[1].indexOf("-")>0&&("index"===window.dotcom.page.asset_type?r[1]=r[1].replace("-",""):r[1]=r[1].split("-")[0]),(w&&"live"!==s||"test"===s)&&(l="flash"),"preview"===s&&(l="test"),"russian"!==r[0]||w||"preview"===s||"test"===s||(l="russia"),"zhongwen"!==r[0]&&"ukchina"!==r[0]||w||(l=r[0]+r[1]),t[1]=""!==s?t[1].replace("ENV",s):t[1].replace("ENV",w?"test":"live"),c&&(!w&&"preview"!==s&&"test"!==s||"live"===s)&&(t[1]=t[1].replace("/bbccom.","/bbcworldservice.")),t[1]=c||!o||w||"test"===s||"preview"===s?t[1].replace("SITE",l).replace("japanese","japan"):t[1].replace("SITE",`mobile.${l}`),"zhongwen"===r[0]?(t[2]=t[2].replace("SECTION",r[0]+r[1]),t[2]=t[2].replace("SUBSECTION",void 0!==r[2]?`${r[2]}_content`:"home_content")):"reel"===r[0]?(t[2]=t[2].replace("SECTION",r[0]),t[2]=t[2].replace("SUBSECTION",void 0!==r[1]?"other":"homepage")):(t[2]=t[2].replace("SECTION",""===r[0]||"wwhp"===r[0]?"bbc":r[0]),t[2]=t[2].replace("SUBSECTION",void 0!==r[1]?`${r[1]}_content`:"homepage_int").replace("articles_","")),t.join(""))};const $={STORY:"STORY",STY:"STORY",IDX:"INDEX"},T=e=>{let o=(e=>$[e]||!1)(e.type);const t=x(e.path),n=e.href.split(/[?#]/)[0];return o||("homepage"===t[0]&&(o="INDEX"),/(news|sport)\/live\//.test(e.href)&&(o="LIVE_EVENT")),o||(/.*(-|\/)(\d{7,9})$/.test(n)?"STORY":"INDEX")},A={href:"",path:""},C=e=>{const o={...A,...e};return o.type=T(o),o},j=()=>{const{page:e}=window.dotcom,{href:o,pathname:t}=window.location,n=window.innerWidth<900,i=S(o,n).split("/"),{type:s}=C({href:o,pathname:t}),{adCampaign:d,topics:a=[]}=window.dotcom.config,r=a.length?a.map((e=>e.replace(/\s+/g,"-"))):[],{title:c}=document;return{dfp_adUnit1:i[2]??"",dfp_adUnit2:i[3]??"",type:s,article:{destinations:[],keyword:d??"",name:c??""},channel:e.channel??"",column:"",section:e.section??"",story_id:e.story_id??"",subsection:e.subsection??"",tags:[],topics:r}},R="log",O="error",L={enabled:!1};("undefined"!=typeof window&&/[?|&]ads-debug/.test(window.location.href)||"undefined"!=typeof document&&-1!==document.cookie.indexOf("ads-debug="))&&(L.enabled=!0);const z=function(e){return(o,t=R)=>{L.enabled&&console[t](`dotcom:${e} ${o}`)}},D=z("permutive"),N=()=>{if(!window.permutive)return;D("Track grapeshot");const e=j();delete e.dfp_adUnit1,delete e.dfp_adUnit2,window.permutive.track("Grapeshot",{...e,grapeshot:window.gs_channels})},U=z("permutive"),q=()=>{U("get cust_params");const e=window.localStorage.getItem("_pdfps");return encodeURIComponent(JSON.parse(e||"[]").slice(0,250).join(","))},V=z("permutive"),B=()=>{if(!window.permutive)return;V("Track page view");const e=j();window.permutive.addon("web",{page:{...e}})},M=e=>{if("string"!=typeof e)return null;const o=e.split(":").map((e=>parseInt(e,10)));switch(o.length){case 3:return 60*o[0]*60+60*o[1]+o[2];case 2:return 60*o[0]+o[1];case 1:return o[0]}return null};let F=0;const G=(e,o)=>{const{play_id:t,properties:{ad:n,video:i,enriched_data:s}}=o;return"ad"===e?{play_id:t,ad:n,video:i,enriched_data:s}:{play_id:t,video:i,enriched_data:s}},X=(e,o)=>{const{permutive:t}=window;switch(e.type){case"playlistLoaded":{const n=e.playlist?.title,i=e.playlist?.groupId,s=e.playlist?.summary,d=M(e.playlist?.programmeDuration),{video:a}=o.properties;n&&(a.name=n),i&&(a.video_id=i),s&&(a.description=s),d&&(a.duration=d);const r=G("video",o);t.track("VideoLoad",r)}break;case"adsPlugin":switch(e.id){case"adRequest":o.adsActive=!0;break;case"adDuration":o.properties.ad.duration=e.duration;break;case"adStarted":{const e=G("ad",o);t.track("VideoAdPlay",e)}break;case"adProgress":{let n=0;switch(e.progress){case"firstQuartile":n=25;break;case"midpoint":n=50;break;case"thirdQuartile":n=75;break;case"complete":n=100}const i={...G("ad",o),progress:n};t.track("VideoAdProgress",i)}break;case"adClick":{const e=G("ad",o);t.track("VideoAdClick",e)}break;case"adData":o.properties.ad.creative_id=parseInt(e.info.creativeId,10),o.properties.ad.lineitem_id=parseInt(e.info.adId,10)}break;case"bbc.smp.plugins.ads.event.AdsPluginExternalEvent.ALL_ADS_COMPLETED":o.adsActive=!1;break;case"playing":if(!o.adsActive){const e=G("video",o);t.track("VideoPlay",e)}break;case"timeupdate":{const n=(e=>e>=75?.75:e>=50?.5:e>=25?.25:0)(Math.floor(e.currentTime)/Math.floor(e.duration)*100);if(n===F)break;if(0===n)break;const i={...G("video",o),progress:n};t.track("VideoProgress",i),F=n}break;case"ended":{const e={...G("video",o),progress:1};t.track("VideoProgress",e)}break;case"fullscreenEnter":case"fullscreenExit":case"picInPicStarted":case"picInPicStopped":{const n={fullscreenEnter:"Full screen on",fullscreenExit:"Full screen off",picInPicStarted:"Picture in picture on",picInPicStopped:"Picture in picture off"},i=o.adsActive?"VideoAdEvent":"VideoEvent",s=o.adsActive?"ad":"video",d=G(s,o);t.track(i,{...d,event:n[e.type]})}}};const Y=z("permutive"),W=["playing","adsPlugin","timeupdate","fullscreenEnter","fullscreenExit","picInPicStarted","picInPicStopped","ended","playlistLoaded","bbc.smp.plugins.ads.event.AdsPluginExternalEvent.ALL_ADS_COMPLETED"],H="e488cdb0-e7cb-4d91-9648-60d437d8e491",Q={name:"permutive",url:()=>`https://cdn.permutive.com/${H}-web.js`,preLoad:()=>{k(document,window.permutive,H,"1bb84885-9325-4fef-adda-a208032b2715",{consentRequired:!0})},trackPageView:B,trackGrapeshot:N,getCustParams:q,addVideoEventListeners:()=>{if(!window.permutive)return;Y("Track video events");const e=()=>{let e=0;const o=setInterval((()=>{e+=1;const t=window?.embeddedMedia?.api?.players(),n=0===Object.keys(t).length&&t.constructor===Object;return n&&40===e?(Y(".embeddedMedia.api.players() returned no players after 40 attempts"),clearInterval(o),!1):!n&&(Y(`.embeddedMedia.api.players() returned players after ${e} attempts`),(e=>{Object.keys(e).forEach((o=>{const t=e[o],{player:{playlist:n}}=t,i={play_id:"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const o=Math.floor(16*Math.random());return("x"===e?o:3&o|8).toString(16)})),adsActive:!1,properties:{ad:{},video:{},enriched_data:j()}};if(n){const e=n?.title,o=n?.groupId,t=n?.summary,s=M(n?.programmeDuration),{video:d}=i.properties;e&&(d.name=e),o&&(d.video_id=o),t&&(d.description=t),s&&(d.duration=s)}W.forEach((e=>{t.bind(e,(e=>{X(e,i)}))}))}))})(t),clearInterval(o),!0)}),100)};(()=>{let o=0;const t=setInterval((()=>(o+=1,window.embeddedMedia||40!==o?!!window.embeddedMedia&&(Y(`.embeddedMedia found after ${o} attempt(s)`),e(),clearInterval(t),!0):(Y(".embeddedMedia not found after 40 attempts"),clearInterval(t),!1))),100)})()},meetsRequirements:e=>!v.isWorldService()&&(void 0!==e.permutive&&e.permutive||-1!==window.location.search.indexOf("permutive"))},J={name:"ias",url:()=>"https://cdn.adsafeprotected.com/iasPET.1.js",preLoad:()=>{window.__iasPET=window.__iasPET||{},window.__iasPET.queue=window.__iasPET.queue||[],window.__iasPET.pubId="9708"},meetsRequirements:e=>!v.isWorldService()&&(-1!==window.location.search.indexOf("ias_publisher")||void 0!==e.ias_publisher&&e.ias_publisher)},K={name:"cmp",url:()=>"https://gn-web-assets.api.bbc.com/ngas/vendor/fundingchoices/cmp.js",preLoad:()=>{window.googlefc=window.googlefc||{},window.googlefc.callbackQueue=window.googlefc.callbackQueue||[]},meetsRequirements:()=>!(!window.dotcom.userinfo.eea&&!document.cookie.split(";").some((e=>e.trim().startsWith("FCCDCF="))))&&(("www.test.bbc.com"===window.location.host||"www.bbc.com"===window.location.host)&&window.location===window.parent.location)},Z="zephr",ee=o=>{const t=e("blaize_jwt"),n=window.dotcom.page;function i(e){const o=document.createElement("div");o.setAttribute("class",e),document.body.appendChild(o)}n.rsi="",n.topics=window.dotcom.config.topics.toString(),n.country=window.dotcom.userinfo.country,i(`zephr_${window.dotcom.page.asset_type}`),i("zephr_meter"),window.zephrBrowser=o,o.run({cdnApi:"https://xproxy.int.api.bbc.com",jwt:t,customData:n}).catch((e=>{console.error("dotcom:zephr",e)}))},oe={name:Z,url:()=>"https://assets.zephr.com/zephr-browser/1.3.11/zephr-browser.umd.js",preLoad:()=>{window.zephrBrowser=window.zephrBrowser||{}},meetsRequirements:()=>"on"===window.localStorage.getItem(Z)||window.dotcom.flags.zephr,onLoad:()=>{ee(window.zephrBrowser)},requirejs:()=>{window.requirejs(["https://assets.zephr.com/zephr-browser/1.3.11/zephr-browser.umd.js"],(e=>{ee(e)}))},checkURL:()=>{const e=new URL(window.location.href),o=e.searchParams.get(Z);o&&("on"===o&&window.localStorage.setItem(Z,"on"),"off"===o&&window.localStorage.removeItem(Z)),window.dotcom.flags.zephr="on"===window.localStorage.getItem(Z),"on"===e.searchParams.get("xproxy")&&(window.dotcom.flags.xproxy=!0),window.dotcom.flags.zephr&&(window.dotcom.flags.piano=!1)},runProxy:()=>{window.dotcom.flags.xproxy&&window.dotcom.flags.idcta&&window.dotcom.idcta.signedIn&&!e("blaize_jwt")&&(console.log("trying to call xproxy"),fetch("https://xproxy.test.api.bbc.com/zephr-token",{credentials:"include"}).then((e=>{console.log("fetch xproxy return ",e.json())})).catch((()=>{console.log("fetch xproxy fail ")})))}},te={name:"ozone",url:()=>"https://prebid.the-ozone-project.com/hw2/OZONEBBC4784/8890582654/current/ozpb.min.js",meetsRequirements:e=>void 0!==e.ozone&&e.ozone&&(v.isNewsStory()||v.isWWHP())||-1!==window.location.search.indexOf("test-ozone"),id:"adunits_loader"},ne=e=>{let o;if(e){const t=e.split("/");4===t.length&&"article"===t[2]?o=t[3]:(/([0-9]{7,8})$/.test(e)&&(o=RegExp.$1),/(\/articles\/)(c[0-9a-hj-np-z]{10,}o$)/.test(e)&&(o=RegExp.$2))}return o&&{story_id:o}},ie=e=>{let o=/[0-9]{7,8}$/.test(e)?"content":"index";return(e.includes("/articles/")||e.includes("/article/"))&&(o="content"),{ctype:o}},se=e=>{const o={AV:"media_asset",INDEX:"index",FIX:"index",STY:"story"};let t;const n=window?.SIMORGH_DATA?.pageData?.metadata?.type;return void 0===t&&n&&(t=o[n]),void 0===t&&(t=/[0-9]{7,8}$/.test(e)?"story":"index",(e.includes("/articles/")||e.includes("/article/"))&&(t="story")),/\/(sport|news)\/live\//.test(e)&&(t="live_event"),{asset_type:t}},de=e=>{let o;const t=e.referrer.match(/^(http[s]?:\/\/[a-z0-9.]*bbc\.(co\.uk|com))(.*)$/);if(t){const e=t[3].replace(/default.stm$|-|\/|_/g,"");o=e.length>0&&e.length<=64?escape(e):""}else o="nonbbc";return{referrer:o}},ae=e=>{const o=[];let t,n,i,s=[];if(void 0!==e.cookie)for(i=e.cookie.indexOf("rsi_segs="),i>=0&&(i=e.cookie.indexOf("=",i)+1,i>0&&(n=e.cookie.indexOf(";",i),-1===n&&(n=e.cookie.length),s=e.cookie.substring(i,n).split("|"))),t=0;t<s.length&&t<20;t+=1)o.push(s[t]);return{rsi:o}},re=e=>{const o=e?e.replace(/(_|-|\/)[0-9]{7,8}$/,""):"";let t=o.indexOf("/")>-1?o.split("/"):[o];t=t.filter((e=>""!==e));const n=o!==e;let i=t[0]&&{channel:t[0]},s=t[1]&&{section:t[1]};const d=t[2]&&{subsection:t[2]};return t[0]&&"wwhp"!==t[0]||(i={channel:"homepage"}),1!==t.length||n||(s={section:"homepage"}),{...i,...s,...d}},ce=(e,o)=>{let t;return"worldservice"===o.channel&&(t=e.split("/").pop().split("_"),t.shift(),t=t.join("_")),t&&{title:t}},we=e=>{const{pathname:o}=window.location,{document:t}=window,n=ne(o),i=ie(o),s=se(o),d=de(t),a=ae(t),r=re(o),c=ce(o,r),w={...n,...i,...s,...d,...a,...r,...c,domain:window.location.hostname};return e&&Object.keys(e).forEach((o=>{w[o]=e[o]})),w},le=z("loader");window.dotcom=window.dotcom||{},window.dotcom.loader=window.dotcom.loader||{loading:[],loaded:[],failed:[],waiting:[]};const pe=(e,o,t,n,i,s)=>{const d=document.createElement("script");d.type="text/javascript",d.async=!0,d.src=e,d.onload=o,d.onerror=t,i?(d.defer=!0,d.nomodule=!0):n&&(d.type="module"),s&&d.setAttribute("id",s),document.head.appendChild(d)},me=(e,o,t)=>{const n=new Image(1,1);n.onload=o,n.onerror=t,n.src=e},ue=(e,o)=>{window.dotcom.loader.waiting[e].forEach((({resolve:t,reject:n})=>{o?t(`${e} has loaded`):n(new Error(`${e} failed to load`))}))},ge=({name:e,url:o,urlParams:t,preLoad:n,onLoad:i,isImage:s,id:d},a,r)=>{le(`loading ${e}`),window.dotcom.loader.loading.push(e),window.dotcom.loader.waiting[e]=[],"function"==typeof n&&n();const c="function"==typeof t?t():"";(s?me:pe)(o(c),(()=>{const o=`load success > ${e}`;le(o),window.dotcom.loader.loaded.push(e),"function"==typeof i&&i(),a&&a(o),ue(e,!0)}),(()=>{const o=`load fail > ${e}`;le(o),window.dotcom.loader.failed.push(e),r&&r(new Error(o)),ue(e,!1)}),!1,!1,d)},he=({name:e,url:o,urlParams:t,meetsRequirements:n,preLoad:i,onLoad:s,image:d=!1,id:a=null})=>{!window.dotcom.loader.loading.includes(e)&&n(window.dotcom.flags)&&ge({name:e,url:o,urlParams:t,preLoad:i,onLoad:s,image:d,id:a})},fe=({name:e,url:o,urlParams:t,meetsRequirements:n,preLoad:i,onLoad:s,image:d=!1,id:a=null})=>new Promise(((r,c)=>{window.dotcom.loader.loaded.includes(e)?r(`${e} was already loaded`):window.dotcom.loader.failed.includes(e)?c(new Error(`${e} failed to load`)):window.dotcom.loader.loading.includes(e)?window.dotcom.loader.waiting[e].push({resolve:r,reject:c}):n(window.dotcom.flags)?ge({name:e,url:o,urlParams:t,preLoad:i,onLoad:s,image:d,id:a},r,c):c(new Error(`${e} doesn't meet requirements`))})),be=(e,o)=>fe({name:e,url:()=>o,urlParams:null,meetsRequirements:()=>!0,preLoad:null,onLoad:null}),ve=e=>{e.forEach((e=>{he(e)}))},ye=e=>{e.forEach((e=>{const o=document.createElement("link");o.href=e,o.rel="dns-prefetch",document.head.appendChild(o)}))},Ee=(e,o)=>{pe(e,(()=>{}),(()=>{}),!0,o)},ke=(e,o)=>new Promise(((t,n)=>{pe(e,t,n,!0,o)})),xe=z("piano");let _e=!0;let Ie=!1,Pe="",Se="",$e="";const Te=()=>{$e="NEWS_GNL";const o=`${window.location.href.replace(/\?.*$/,"")}?piano-REPLACETYPE`,t=encodeURIComponent(o);return fetch(`https://idcta.api.bbc.com/idcta/config?ptrt=${t}&userOrigin=${$e}`,{credentials:"include"}).then((e=>e.json())).then((o=>(e(o.identity.idSignedInCookieName)&&(Ie=!0),Pe=o.signin_url,Se=o.register_url,"GREEN"===o["id-availability"]?Promise.resolve(!0):Promise.reject(new Error("piano_idcta_flagpole_fail")))))},Ae=()=>be("piano","//cdn.tinypass.com/api/tinypass.min.js").catch((()=>Promise.reject(new Error("piano_load_fail")))),Ce=()=>{_e=-1!==window.location.search.indexOf("piano-debug"),be("piano-ad-block","//www.npttech.com/advertising.js").catch((()=>{const e=new Date;return e.setTime(e.getTime()+3e5),document.cookie=`__adblocker=true; expires=${e.toUTCString()}; path=/`,Promise.resolve(!0)})).then(Te).then(Ae).then((()=>{(()=>{const{tp:e}=window;(v.isAdsDebug()||_e)&&e.push(["setDebug",!0]),e.push(["setAid",_e?"YRhBqilb8R":"tYOkq7qlAI"]),e.push(["setSandbox",!!_e]),e.push(["setUseTinypassAccounts",!1]);const o=[window.dotcom.page.asset_type],t=window.dotcom.page.channel;t&&o.push(t),e.push(["setTags",o]);const{section:n}=window.dotcom.page;if(n&&e.push(["setContentSection",n]),e.push(["setCustomVariable","signedinuser",Ie]),window.Reverb){e.push(["addHandler","checkoutClose",e=>{"close"===e.state&&window.Reverb.userActionEvent("sign-in prompt","dismiss",{container:"Piano Register Phase 1",personalisation:["EDN=Piano Register Phase 1"],metadata:["EXP=modal"],source:window.location.href},{},{},!0)}]),e.push(["addHandler","showTemplate",e=>{let o;o=""===e.containerSelector?"modal":e.containerSelector.split("-")[1];let t="EDN=Piano Register Phase 1";e.templateVariantId&&(t=`${t}~EXP=${e.templateVariantId}`),window.Reverb.userActionEvent("display","sign-in prompt",{container:"Piano Register Phase 1",personalisation:[t],metadata:[`EXP=${o}`],source:window.location.href})}]);const o=["register-inline1","signin-modal","register-modal","register-inlinenobutton","register-header","register-sidebar","register-adblock","signin-adblock","register-footer"];e.push(["addHandler","checkoutCustomEvent",e=>{let t="EDN=Piano Register Phase 1";if(e.params.variantid&&(t=`${t}~EXP=${e.params.variantid}`),o.includes(e.eventName)){const o=e.eventName.split("-");switch(window.Reverb.userActionEvent("display",o[0],{container:"Piano Register Phase 1",personalisation:[t],metadata:[`EXP=${o[1]}`],source:window.location.href},{},{},!0),o[0]){case"register":window.location.assign(Se.replace("REPLACETYPE",o[1]));break;case"signin":window.location.assign(Pe.replace("REPLACETYPE",o[1]))}}}])}e.push(["init",function(){e.experience.init()}])})()})).catch((e=>{xe(e,O)}))},je=0,Re=1,Oe=2,Le="tkn-exp";let ze,De,Ne;window.dotcom=window.dotcom||{},window.dotcom.idcta=window.dotcom.idcta||{};const Ue=z("bootstrap"),qe="https://gn-web-assets.api.bbc.com/ngas";let Ve="";Ve="latest/";let Be="";const Me=`${qe}/${Ve}dotcom-ads.js`,Fe=`${qe}/${Ve}dotcom-analytics.js`,Ge=`${qe}/${Ve}dotcom-preroll.js`,Xe=`${qe}/${Ve}dotcom-signin.js`,Ye=()=>!0===window.dotcom.flags.adverts&&!0===window.dotcom.config.allowAdvertising;window.dotcom=window.dotcom||{},window.dotcom.cmd=window.dotcom.cmd||[],window.dotcom.userinfo={...r,...window.dotcom.userinfo},window.dotcom.flags={...c,...window.dotcom.flags},window.dotcom.vendorConsent={};const We=Object.freeze({pageAds:!0,playerAds:!0,lang:"en",adCampaign:"",topics:[],allowAdvertising:!0});window.dotcom.config={...We,...window.dotcom.config};const He=(e,o)=>{if(null===o)return;const t=(e=>Object.keys(We).find((o=>o.toLowerCase()===e.toLowerCase())))(e);void 0!==t?window.dotcom.config[t]=o:v.isAdsDebug()&&console.log(`dotcom invalid config key: ${e}`)};window.dotcom.setConfig=He;let Qe=[],Je=[];if(window.dotcom.ads&&window.dotcom.ads.resolves){const{resolves:e}=window.dotcom.ads;e&&(e.getAdTag&&(Qe=e.getAdTag.slice()),e.enabled&&(Je=e.enabled.slice()),delete window.dotcom.ads.resolves)}const Ke=(e,o)=>{window.googletag.cmd.push((()=>{window.googletag.pubads().setTargeting(e,o)}))};window.dotcom.ads={instances:{},resetAds:()=>{},destroySlot:()=>{},registerSlot:(e,o,t,n)=>{Ye()&&window.dotcom.cmd.push((()=>{window.dotcom.ads.registerSlot(e,o,t,n)}))},enabled:v.isAdsEnabled,setTargeting:(e,o)=>{window.googletag?Ke(e,o):window.dotcom.cmd.push((()=>{Ke(e,o)}))},getAdTag:()=>new Promise((e=>{var o;void 0!==window.dotcom.ads.adTag?(o=[y,J],new Promise((e=>{let t=0,n=[];o.forEach((i=>{fe(i).then((e=>{n=[...n,e]})).catch((e=>{n=[...n,e]})).then((()=>{t+=1,t===o.length&&e(n)}))}))}))).then((()=>window.dotcom.ads.adTag())).then((o=>{e(o)})):Ye()&&window.dotcom.config.playerAds?Qe.push(e):e("")}))};const Ze={};if(window.bbcdotcom){const e=window.bbcdotcom;e.pubsub.on=(e,o)=>{Ze[e]||(Ze[e]=[]),Ze[e].push(o)},e.pubsub.off=(e,o)=>{if(Ze[e]){const t=Ze[e].indexOf(o);-1!==t&&Ze[e].splice(t,1)}},e.pubsub.trigger=(e,o)=>{Ze[e]&&Ze[e].forEach((e=>e(o)))}}const eo=(e=!0)=>{Qe.length>0&&(Qe.forEach((o=>o(e?window.dotcom.ads.getAdTag():""))),Qe=[])},oo=()=>{if(Ye())Ee(Me,Be),window.dotcom.config.playerAds?ke(Ge,Be).then(eo):eo(!1);else{let e;if(window.dotcomConfig.bbcdotcom){if("news"===window.dotcom.page.channel){const e=document.getElementsByClassName("nw-c-leaderboard-ad");e.length&&(e[0].style.height="0px")}"sport"===window.dotcom.page.channel&&(e=document.getElementById("bbccom_leaderboard_1_2_3_4"),e&&(e.style.height="0px",e.style.paddingBottom="0px"))}else e=document.getElementById("dotcom-leaderboard"),e&&(e.style.height="0px");eo(!1)}let e=!1;"signin"===window.dotcom.config.adCampaign&&("news"===window.dotcom.page.channel&&!0===window.dotcom.flags.signinnews||"news"!==window.dotcom.page.channel&&!0===window.dotcom.flags.signin)&&(e=!0),v.isAdsDebug()?Ee(Xe,Be):e&&ke(Xe,Be).then((()=>{window.dotcom.signinPrompt()})),(!0===window.dotcom.flags.piano&&"news"===window.dotcom.page.channel&&2===n()||-1!==window.location.search.indexOf("piano-debug")&&v.isAdsDebug())&&Ce(),!0===window.dotcom.flags.analytics&&Ee(Fe,Be)},to=()=>{if(!0===window.dotcom.userinfo.notUkIp&&!0===window.dotcom.userinfo.ads)if(window.dotcom.page=we(),v.checkCookies(),oe.checkURL(),window.dotcom.flags.xproxy&&(async()=>{const o=v.isTestEnv(window.location.href)?"https://idcta.test.api.bbc.com/idcta/config":"https://idcta.api.bbc.com/idcta/config",t=await fetch(o,{cache:"no-store"});if(!t.ok)throw new Error(`ID CTA Config Endpoint returned ${t.status}`);if(ze=await t.json(),window.dotcom.idcta.signout=()=>{window.dotcom.idcta.signedIn&&(window.dotcom.idcta.signedIn=!1,window.location.href=`${ze.signout_url}?ptrt=${window.location.href}`)},De=e(ze.identity.idSignedInCookieName),De){window.dotcom.idcta.signedIn=!0;const e=window.atob(De);Ne=JSON.parse(e)}return"GREEN"===ze["id-availability"]})().then((e=>{window.dotcom.flags.idcta=e,e&&window.dotcom.idcta.signedIn&&(async e=>{const{[Le]:o}=Ne,t=new Date(o-6e5);if(Date.now()<t&&!e)return"ensureTokens success - token still valid";const n=await fetch(ze.signin_url,{credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error(`ensureTokens fail - ${ze.signin_url} returned ${n.status}`);return"ensureTokens success - token refreshed!"})(!0).then((e=>{Ue(e),oe.runProxy()})).catch((e=>{Ue(e)}))})),window.dotcom.flags.zephr&&(window.requirejs?oe.requirejs():he(oe)),Ye()&&ve([te,y,E]),K.meetsRequirements()){if(K.preLoad(),v.isWorldService()){const e=document.body.querySelector("header");e&&e.style.setProperty("z-index","2147483643")}new Promise((e=>{window.googlefc.callbackQueue.push({CONSENT_DATA_READY:()=>{window.__tcfapi("getTCData",2,((o,t)=>{t&&(o.gdprApplies&&(window.dotcom.gdprApplies=!0,i("comscore",o.vendor.consents[77]),i("permutive",o.vendor.consents[360]&&o.vendor.consents[361]),i("nielsen",o.vendor.consents[373]&&o.vendor.consents[812]),e(!0)),e(!0)),e(!0)}),[77,164,360,361,373,812])}})})).then((()=>{Ye()&&ve([Q,J]),oo()})),he(K)}else Ye()&&ve([Q,J]),oo()},no=(e={})=>{var o;o=e,Object.keys(o).forEach((e=>{He(e,o[e])})),He("lang",document.documentElement.lang||window.dotcom.config.lang||We.lang),v.isDotcomAllowed()&&(Ye()&&ye(["//www.googletagservices.com/","//bbc.gscontxt.net/","//tags.crwdcntrl.net/","//ad.crwdcntrl.net/"]),!0===window.dotcom.flags.analytics&&ye(["//secure-us.imrworldwide.com/","//ssc.api.bbc.com/"])),window.dotcom.userinfo.state>0&&window.dotcom.flags.state>0?to():window.dotcom.userinfo.state<0||window.dotcom.flags.state};window.dotcom.featuresInited=!1,window.dotcom.locationChange=e=>{v.isFeaturesSite()&&window.dotcom.featuresInited&&(window.dotcom.page.pageType!==e.keyValues.pageType&&window.dotcom.ads.destroySlots(),window.dotcom.page.channel!==e.keyValues.channel&&window.dotcom.ads.destroySlots()),window.dotcom.page=we(e?e.keyValues:null),v.isFeaturesSite()||(window.dotcom.ads.resetAds(),window.dotcom.reinitAds())},v.init().then((()=>{no(window.dotcomConfig),Je.length&&Je.forEach((e=>{v.isAdsEnabled().then((o=>{e(o)}))}))})).catch((e=>{console.log(`dotcom environment failed to initialize. Error: ${e}`)}));const io=window.performance.now();let so=0;const ao=()=>{if(so+=1,so<5)window.requestAnimationFrame(ao);else{const e=window.performance.now()-io,o=e<150?je:e<500?Re:Oe;window.dotcom.performance=o}};window.requestAnimationFrame(ao)}();