/*! "1.147.0-20220711-083435-f6c8b9d" */!function(){"use strict";const e="log",o="warn",t={enabled:!1};("undefined"!=typeof window&&/[?|&]ads-debug/.test(window.location.href)||"undefined"!=typeof document&&-1!==document.cookie.indexOf("ads-debug="))&&(t.enabled=!0);const n=function(o){return(n,s=e)=>{t.enabled&&console[s](`dotcom:${o} ${n}`)}},s=e=>{const o=e?e.replace(/(_|-|\/)[0-9]{7,8}$/,"").replace(/\/articles\/c[0-9a-hj-np-z]{10,}o$/,"/articles"):"";return o.indexOf("/")>-1?o.split("/"):[o]},a=e=>{if("undefined"==typeof document||!e)return"";const o=`; ${document.cookie}`.split(`; ${encodeURIComponent(e)}=`);let t="";return 2===o.length&&(t=decodeURIComponent(o.pop().split(";").shift())),t},i=(e,o,t)=>{if("undefined"==typeof document||!e)return;const n=new Date(Date.now()+864e5*t);document.cookie=`${encodeURIComponent(e)}=${encodeURIComponent(o)}; expires=${n.toGMTString()}; domain=.bbc.com; path=/`},r=e=>{window.dotcom.consent=e},c=new RegExp("^(/)?(afaanoromoo|afrique|amharic|arabic|azeri|bengali|burmese|gahuza|gujarati|hausa|hindi|igbo|indonesia|korean|kyrgyz|japanese|marathi|mundo|naidheachdan|nepali|pashto|persian|pidgin|portuguese|punjabi|russian|serbian|sinhala|somali|swahili|tajik|tamil|telugu|thai|tigrinya|turkce|ukchina|ukrainian|urdu|uzbek|vietnamese|yoruba|zhongwen)"),d=new RegExp("^/ws/av-embeds/"),w=["AT","AX","BE","BG","BL","CY","CZ","DE","DK","EE","ES","EU","FI","FR","GB","GF","GG","GI","GP","GR","HR","HU","IE","IM","IS","IT","JE","LI","LT","LU","LV","MF","MT","MQ","NL","NO","PL","PM","PT","RE","RO","SE","SI","SK","YT"],p={state:0,eea:!0,country:"gb",ads:!1,notUkIp:!1},l={state:0,adverts:!1,idcta:!1},u=()=>"undefined"!=typeof window&&/[?|&]ads-debug/.test(window.location.href)||"undefined"!=typeof document&&-1!==document.cookie.indexOf("ads-debug=")||void 0!==window.dotcom.config&&!0===window.dotcom.config.adsDebug,m=(e=window.location.href)=>!(void 0===window.dotcom.config||!window.dotcom.config.mode||"test"!==window.dotcom.config.mode)||("undefined"!=typeof live&&"test"===live||(-1!==e.indexOf("test.api.bbc.co.uk")||/(localhost|sandbox|int|test|stage)(.dev)*.bbc.co*/.test(e))),g=()=>!0===window.dotcom.userinfo.notUkIp&&!0===window.dotcom.userinfo.ads,f=()=>!!(u()||g()&&window.dotcom.flags.state>0&&window.dotcom.flags.adverts),h=e=>{var o;window.dotcom.userinfo.country=e["X-Country"],window.dotcom.userinfo.notUkIp="no"===e["X-Ip_is_uk_combined"],window.dotcom.userinfo.ads="yes"===e["X-Ip_is_advertise_combined"],!0===window.dotcom.userinfo.notUkIp&&(window.dotcom.userinfo.eea=!!(o=window.dotcom.userinfo.country)&&-1!==w.indexOf(o.toUpperCase()))},y=(e,o)=>{o||(delete e.adverts,delete e.analytics),Object.keys(e).forEach((o=>{let t=e[o];t="true"===t||t,t="false"!==t&&t,window.dotcom.flags[o]=t}))},b=()=>fetch(m()?"https://gn-flagpoles.test.api.bbci.co.uk/ngas":"https://gn-flagpoles.api.bbci.co.uk/ngas").then((e=>{if(e.ok)return e.json();throw new Error("Error fetching flags")})).then((e=>{y(e,!1),window.dotcom.flags.state=2,u()&&(window.dotcom.flags.adverts=!0,window.dotcom.flags.analytics=!0)})).catch((e=>(window.dotcom.flags.state=-2,Promise.reject(e))));let _,S=[];const v={isAdsDebug:u,isTestEnv:m,isDotcomAllowed:g,isAdsEnabled:()=>new Promise((e=>{window.dotcom.userinfo.state<0||window.dotcom.flags.state<0?e(f()):0===window.dotcom.userinfo.state||0===window.dotcom.flags.state?S.push(e):e(f())})),isAnalyticsEnabled:()=>!0===window.dotcom.flags.analytics,isSigninEnabled:()=>!0===window.dotcom.flags.signin,isInEEA:()=>window.dotcom.userinfo.eea,isWorldService(e){const o=e||window.location.pathname;return c.test(o)||d.test(o)},isNewsStory:()=>"news"===window.dotcom.page.channel&&"story"===window.dotcom.page.asset_type&&!window.dotcomConfig.bbcdotcom,isLive:()=>"live"===window.dotcom.page.section,isSportsStory:()=>"sport"===window.dotcom.page.channel&&"story"===window.dotcom.page.asset_type,isSportsIndexOrHomePage:()=>"index"===window.dotcom.page.asset_type&&("sport"===window.dotcom.page.channel||"sporttipo"===window.dotcom.page.channel),isFeaturesSite(){const e=window.dotcom.page.channel;return"future"===e||"worklife"===e||"travel"===e||"culture"===e},isStoryworksSite:()=>"storyworks"===window.dotcom.page.channel,isFeaturesArticle(){return this.isFeaturesSite()&&"ARTICLE"===window.dotcom.page.pageType},isTwoColumnLayout(e=!1){if("story"===window.dotcom.page.asset_type){if((void 0===_||!0===e)&&(_=!1,window.innerWidth>900)){const e=document.getElementsByTagName("aside");if(e.length){e[0].getBoundingClientRect().top+window.scrollY<window.innerWidth&&(_=!0)}}}else _=!1;return _},isWWHP(){const e=window.location.pathname;return"/"===e||"/wwhp"===e},checkCookies(){r(1);const e=a("ckns_policy");(u()||e&&"1"===e.charAt(2))&&r(2),e||window.dotcom.userinfo.eea||(r(2),i("ckns_policy","111",365),i("ckns_explicit","0",365))},init(){const e=({resolve:e,reject:o,err:t})=>{e&&e(!0),o&&o(t),S&&S.length>0&&(S.forEach((e=>e(f()))),S=[])};return new Promise(((o,t)=>{u()?(window.dotcom.userinfo.state=1,window.dotcom.userinfo.country="au",window.dotcom.userinfo.notUkIp=!0,window.dotcom.userinfo.ads=!0,window.dotcom.userinfo.eea=!1,b().then((()=>{e({resolve:o})})).catch((o=>{e({reject:t,err:o})}))):fetch("https://www.bbc.com/userinfo").then((e=>{if(e.ok)return e.json();throw new Error("Error fetching userinfo")})).then((e=>{h(e),window.dotcom.userinfo.state=1})).catch((e=>(window.dotcom.userinfo.state=-1,Promise.reject(e)))).then((()=>{g()?fetch(m()?"https://gn-flagpoles.test.api.bbci.co.uk/gnlops":"https://gn-flagpoles.api.bbci.co.uk/gnlops").then((e=>{if(e.ok)return e.json();throw new Error("Error fetching gnlops flags")})).then((e=>{y(e,!0),window.dotcom.flags.state=1})).catch((e=>(window.dotcom.flags.state=-1,Promise.reject(e)))).then((()=>{!0!==window.dotcom.flags.adverts&&!0!==window.dotcom.flags.analytics||b().then((()=>{e({resolve:o})}))})).catch((o=>{e({reject:t,err:o})})):(window.dotcom.flags.state=1,e({resolve:o}))})).catch((o=>{e({reject:t,err:o})}))}))},reset(){S=[],window.dotcom=window.dotcom||{},window.dotcom.userinfo={...p},window.dotcom.flags={...l},window.dotcom.vendorConsent=[]}},E=(e,o)=>{const t=o.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),n=new RegExp(`[\\?&]${t}=([^&#]*)`).exec(e);return null===n?"":decodeURIComponent(n[1].replace(/\+/g," "))},x=["/4817","/bbccom.ENV.site.SITE","/SECTION_SUBSECTION"];let I="";const k=(e,o)=>{if(I)return I;const t=[...x],n=e.indexOf("?")>-1?`?${e.split("?")[1]}`:"",a=e.split("?")[0],i=E(n,"site"),r=E(n,"adUnit");let c=a.match(/http(|s):\/\/[a-z0-9\-.]+(.com|.co.uk)(:\d+)?(\/)?(.*)?/);c=c?c.pop():"",c=c&&""!==c?(e=>e.replace(/^(news\/av\/)(.*)\/[^/]+$/,"$1$2").replace(/^news\/av\//,"news/").replace(/_and_/,"-").replace(/^news\/uk-(england|northern-ireland|scotland|wales)($|-|\/)/,"news/uk/$2").replace(/^news\/uk-([a-z]+)(-([a-z]+))?/,"news/$1/$3").replace(/^news\/(world)-([a-z-]+)/,"news/$2/").replace(/^sport\/av\//,"sport/").replace(/^sport\/(world|uk)/,"sport").replace(/^sport\/(.*)\/sports($|\/)/,"sport/$1$2").replace(/market-data\/overview/,"market-data").replace(/^(programmes)/,"news/$1"))(c):c;const d=s(c)||[],w=v.isWorldService(c),p=v.isTestEnv(a);let l=""===d[0]||"wwhp"===d[0]?"www":d[0];return r||(void 0===d[0]&&(d[0]="homepage"),"sport"===d[0]&&(l="news",d[1]&&(d[1]=d[1].replace("-",""))),"in-pictures"===d[1]&&(d[1]="inpictures"),"news"===d[0]&&d[1]&&d[1].indexOf("-")>0&&("index"===window.dotcom.page.asset_type?d[1]=d[1].replace("-",""):d[1]=d[1].split("-")[0]),(p&&"live"!==i||"test"===i)&&(l="flash"),"preview"===i&&(l="test"),"russian"!==d[0]||p||"preview"===i||"test"===i||(l="russia"),"zhongwen"!==d[0]&&"ukchina"!==d[0]||p||(l=d[0]+d[1]),t[1]=""!==i?t[1].replace("ENV",i):t[1].replace("ENV",p?"test":"live"),w&&(!p&&"preview"!==i&&"test"!==i||"live"===i)&&(t[1]=t[1].replace("/bbccom.","/bbcworldservice.")),t[1]=w||!o||p||"test"===i||"preview"===i?t[1].replace("SITE",l).replace("japanese","japan"):t[1].replace("SITE",`mobile.${l}`),"zhongwen"===d[0]?(t[2]=t[2].replace("SECTION",d[0]+d[1]),t[2]=t[2].replace("SUBSECTION",void 0!==d[2]?`${d[2]}_content`:"home_content")):"reel"===d[0]?(t[2]=t[2].replace("SECTION",d[0]),t[2]=t[2].replace("SUBSECTION",void 0!==d[1]?"other":"homepage")):(t[2]=t[2].replace("SECTION",""===d[0]||"wwhp"===d[0]?"bbc":d[0]),t[2]=t[2].replace("SUBSECTION",void 0!==d[1]?`${d[1]}_content`:"homepage_int").replace("articles_","")),t.join(""))};const $=e=>{let o;if(e){const t=e.split("/");4===t.length&&"article"===t[2]?o=t[3]:(/([0-9]{7,8})$/.test(e)&&(o=RegExp.$1),/(\/articles\/)(c[0-9a-hj-np-z]{10,}o$)/.test(e)&&(o=RegExp.$2))}return o&&{story_id:o}},T=e=>{const o=$(e);return!(!o||!o.story_id)&&o.story_id};let O=[];const C=n("permutive"),j=()=>{C("get cust_params");const e=window.localStorage.getItem("_pdfps");return encodeURIComponent(JSON.parse(e||"[]").slice(0,250).join(","))},A=(()=>{let e;const o=function(e,o,t){return e.concat("%26",o,"%3D",t)};return{parseIASResponseData:function(o){e=JSON.parse(o)},getIASPageTargetingAsQueryString:function(){let t="";return t=o(t,"fr",e.fr),Object.keys(e.brandSafety).forEach((n=>{t=o(t,n,e.brandSafety[n])})),t},getIASSlotTargetingAsQueryString:()=>{const t={};return Object.keys(e.slots).forEach((n=>{const s=e.slots[n];let a="";Object.keys(s).forEach((e=>{const i=s[e];if(Array.isArray(i)){a=a.concat("%26",e,"%3D");const o=i.length-1;for(let e=0,t=i.length;e<t;e+=1){let t="%2C";e===o&&(t=""),a=a.concat(i[e],t)}}else a=o(a,e,i);t[n]=a}))})),t},getAdSlotDataObj:()=>e}})();n("loader");window.dotcom=window.dotcom||{},window.dotcom.loader=window.dotcom.loader||{loading:[],loaded:[],failed:[],waiting:[]};const U=n("ias"),R=e=>{const o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const o=Math.floor(16*Math.random());return("x"===e?o:3&o|8).toString(16)}));return new Promise(((t,n)=>{if(s="ias",!window.dotcom.loader.loaded.includes(s))return void n(new Error("IAS is not enabled"));var s;const a=setTimeout((()=>{const e="getIasCustParams timeout";U(e),n(new Error(e))}),2e3),i=[{adSlotId:o,size:[1,1],adUnitPath:e,type:"video"}];window.__iasPET.queue.push({adSlots:i,dataHandler:function(e){clearTimeout(a),A.parseIASResponseData(e);const n=A.getIASPageTargetingAsQueryString(),s=A.getIASSlotTargetingAsQueryString(),i=n.substr(3)+s[o];U(`cust params: ${i}`),t(i)}})}))},N="ckpf_ppid";const P=[[0,320],[319,400],[399,600],[599,1008],[1007,1280],[1279,99999]];let z=JSON.parse(JSON.stringify([[0,320],[319,400],[399,600],[599,900],[899,1280],[1279,99999]]));z.pop(),z[4][1]=99999;const D=n("preroll"),L={sz:"640x360",iu:"ADUNIT",env:"vp",gdfp_req:"1",impl:"s",output:"xml_vast3",unviewed_position_start:"1",ord:"ORD",url:"URL",ad_rule:"1",npa:"0",rdp:"0",ppid:"",ad_type:"audio_video",cust_params:{channel:"SECTION",sectn:"SUBSECTION",domain:"www.bbc.com",story_id:"ARTICLEID",ctype:"content",asset_type:"story",referrer:"",referrer_domain:"",gs_cat:"GRAPESHOT",group:"4"}},B=async e=>{const t={...L};t.cust_params={...L.cust_params};let n=e||window.location.href;const i=n.split("?")[1]?n.split("?")[1]:"";n=n.split("?")[0],n.indexOf("/ws/av-embeds/cps/")>0&&(n=`${n.split("ws/av-embeds/cps/")[0]}${n.split("/ws/av-embeds/cps/")[1].split("/").splice(0,2).join("/")}`,t.url=n);let r=n.match(/http(|s):\/\/[a-z0-9\-.]+(.com|.co.uk)(:\d+)?(\/)?(.*)?/);r=r?r.pop():"";const c=e.match(/.*:\/\/([a-z0-9\-.]*)?/),d=s(r)||[];i&&(n=`${n}?${i}`);const w=window.innerWidth<900,p=k(n,w),l=(()=>{const{href:e}=window.location,o=e.indexOf("?")>-1?`?${e.split("?")[1]}`:"";return E(o,"uid")})(),u=O,{adCampaign:m,topics:g=[]}=window.dotcom.config,f=j();if(t.iu=p,t.ord=Math.floor(1e9*Math.random()),t.cust_params.story_id=T(r)||"",t.cust_params.gs_cat=void 0!==window.gs_channels&&"DEFAULT"!==window.gs_channels?`${encodeURIComponent(window.gs_channels)}`:"",t.cust_params.channel=d[0]&&"wwhp"!==d[0]?d[0]:"homepage",t.cust_params.sectn=d[1]||"",c&&c[1]&&(t.cust_params.domain=c[1]),""===t.cust_params.story_id&&(t.cust_params.asset_type="index",t.cust_params.ctype="index"),""!==l&&(t.cust_params.uid=l),u.length&&(t.cust_params.excl_cat=u.join(",")),t.cust_params.group=(()=>{const e=window.innerWidth;let o="0";for(let t=0;t<P.length;t+=1){const n=P[t];e>n[0]&&e<n[1]&&(o=t.toString())}return o})(),m&&(t.cust_params.keyword=m),g?.length){const e=g.map((e=>e.replace(/\s+/g,"-"))).join(",");t.cust_params.topics=encodeURIComponent(e)}f&&(t.cust_params.permutive=f),t.ppid=a(N);try{const e=await R(p);t.cust_params.ias=e}catch(e){D(e.message,o)}return t};window.dotcom.ads.adTag=async e=>{let o="https://pubads.g.doubleclick.net/gampad/ads?";const t=e||window.location.href,n=await B(t);return Object.keys(n).forEach((e=>{"object"==typeof n[e]?o+=`${e}=${(e=>{let o="";return"object"!=typeof e?"":(Object.keys(e).forEach((t=>{o+="ias"===t?`${e[t]}%26`:`${t}%3D${encodeURIComponent(e[t])}%26`})),o=o.replace(/&+$/,""),o)})(n[e])}`:o+=`${e}=${n[e]}&`})),o=o.replace(/&+$/,""),void 0===window.dotcom.gdprApplies&&(1===window.dotcom.consent||window.dotcom.userinfo.eea)&&(o=`${o}&rdp=1&npa=1`),o}}();